{% extends "splunkdj:base_with_account_bar.html" %}

{% load splunkmvc %}
{% load demoview %}

{% block title %}{{wftoolkit}}My Custom View{% endblock title %}

{% block content %}
    <h2>Downloads per Artist</h2>
    <h4>How many artists do you want to show? (1-21)</h4>
    {% textbox
        id="txtNum"
        value="$headNum$"|token_safe
        default="10"
    %}
    {% demo
        id="mydemoview"
        managerid="mysearch"
    %}
{% endblock content %}

{% block managers %}
    {% searchmanager id="mysearch"
        search="| inputlookup musicdata.csv | search bc_uri=/sync/addtolibrary* | stats count by artist_name | table artist_name, count | head $headNum$"|token_safe
        cache=True
    %}
{% endblock managers %}
