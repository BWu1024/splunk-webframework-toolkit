
<div class="dashboard-body container-fluid main-section-body centered component-page" data-role="main">
    <div class="row">
        <div class="span12 dashboard-header clearfix">
            <h2>Search managers</h2>
        </div>
    </div>
    <div class="dashboard-row">
        <div class="dashboard-cell">
            <div class="dashboard-panel">
                <div class="dashboard-element">
                    <div class="panel-body html">  
                        <p>
                            Search is a core feature of the Splunk Web Framework. Most of the framework views can be bound to a search in various ways. Some views are populated by searches, some modify the searches they are bound to, and some do both.
                        </p>
                        <p>
                            Each search is represented by a <i>manager</i> that manages the query, properties, operation, and lifetime of an individual search job. The types of search managers corresond to the types of search:
                        </p>
                        <ul>
                            <li><b>SearchManager</b> corresponds to a search job.</li>
                            <li><b>SavedSearchManager</b> corresponds to a saved report.</li>
                            <li><b>PostProcessManager</b> corresponds to a post-process search.</li>
                        </ul> 

                        <div class="page-header"></div>
                        <h2>SearchManager</h2>
                        <p>
                            A SearchManager represents a search manager for a search job, which can be generated dynamically or hard coded. The <code>search</code> property corresponds to the search query. Here is an example of declaring a SearchManager for a search that counts the events in the internal index:
                        </p>
                
                        <div class="tab-pane active" id="js">
                            <pre class="prettyprint linenums lang-js">
var SearchManager = require("splunkjs/mvc/searchmanager");
new SearchManager({
    id: "search1",
    search: "index=_internal | stats count by sourcetype" 
});
                            </pre>
                        </div>
                
                        <p>
                            To bind a search manager to a view, provide the manager's unique ID in the view's <code>managerid</code> property. For example, to create a chart that is bound to the previous search manager:
                        </p>
                
                        <div class="tab-pane active" id="js2">
                            <pre class="prettyprint linenums lang-js">
var ChartView = require("splunkjs/mvc/chartview");
new ChartView({
    id: "example-chart",
    managerid: "example-search",
    el: $("#divToHangOn")
}).render();
                            </pre>
                        </div>

                        <h3>Options</h3>
                        <p>
                            You can set the following properties using templates tags or JavaScript. These search manager options do not affect the search job on the Splunk server.
                        </p>
                        <ul>
                            <p><code>app</code>: Sets the namespace (the app context) to run in.</p>
                            <p><code>autostart</code>: When <code>true</code>, the search manager automatically starts a new job when its properties have changed and when the page first loads (and the <code>component_loader</code> is called). When <code>false</code>, application code must call <code>startSearch</code> manually to start a search.</p>
                            <p><code>cache</code>: When <code>true</code>, the search manager always uses the results from a preexisting search job when possible. When <code>false</code>, the search manager never uses results from preexisting search jobs. When <code><i>n</i></code>, only search jobs that are newer than <i>n</i> seconds are used.</p>
                            <p><code>search</code>: The search query string.</p>
                            <p><code>sid</code>: The search job ID.</p>
                        </ul>
                        <h3>Search job options</h3>
                        <p>
                            Additional properties can be set that modify the search job on the Splunk instance. For example, to set the <code>latest_time</code> property:
                        </p>

                        <div class="tab-pane active" id="js3">
                            <pre class="prettyprint linenums lang-js">
var SearchManager = require("splunkjs/mvc/searchmanager");
new SearchManager({
    id: "search1",
    latest_time: "now",
    search: "index=_internal | stats count by sourcetype" 
});                         </pre>
                        </div>
               
                        <p>For a complete list of search job options, see the <a href="http://docs.splunk.com/Documentation/WebFramework" target="_blank">SearchManager in the Component Reference</a>.</p>

                        <h3>Events</h3>
                        <p>The following events are fired by this search manager:</p>
                        <ul>
                            <p><code>search:error</code>: Fired when an error occurs.</p>
                            <p><code>search:fail</code>: Fired when the search job fails.</p>
                            <p><code>search:progress</code>: Fired to indicate search progress.</p>
                            <p><code>search:cancelled</code>: Fired when the search is cancelled.</p>
                            <p><code>search:start</code>: Fired when the search is started.</p>
                            <p><code>search:done</code>: Fired when the search is completed and will return no more results. This event is never fired for real-time searches.</p>
                        </ul>

                        <div class="page-header"></div>
                        <h2>SavedSearchManager</h2>
                        <p>
                            A SavedSearchManager corresponds to a saved report (by providing its ID) on a Splunk instance. Bind views to a SavedSearchManager the same way you'd bind to a SearchManager. For example, to bind a chart to a saved report called "example-saved-search":
                        </p>

        
                        <div class="tab-pane active" id="js4">
                            <pre class="prettyprint linenums lang-js">
var ChartView = require("splunkjs/mvc/chartview");
new ChartView({
    id: "example-chart",
    managerid: "example-saved-search",
    el: $("#divToHangOn")
}).render();

var SavedSearchManager = require("splunkjs/mvc/savedsearchmanager");
new SavedSearchManager({
    id: "example-saved-search",
    searchname: "all100",
});
                            </pre>
                        </div>
                
                        <h3>Options</h3>
                        <p>You can set the following properties using templates tags or JavaScript:</p>
                        <ul>
                            <p><code>app</code>: Sets the namespace (the app context) to run in.</p>
                            <p><code>autostart</code>: When <code>true</code>, the search manager automatically starts a new job when its properties have changed and when the page first loads (and the <code>component_loader</code> is called). When <code>false</code>, application code must call <code>startSearch</code> manually to start a search.</p>
                            <p><code>cache</code>: When <code>true</code> the search manager always uses the results from a preexisting search job when possible. When <code>false</code>, it never uses results from preexisting search jobs. When <code><i>n</i></code>, only search jobs that are newer than <i>n</i> seconds are used.</p>
                            <p><code>searchname</code>: The name of the saved report on the Splunk server.</p>
                        </ul>

                        <h3>Events</h3>
                        <p>The following events are fired by this search manager:</p>
                        <ul>
                            <p><code>search:error</code>: Fired when an error occurs.</p>
                            <p><code>search:fail</code>: Fired when the search job fails.</p>
                            <p><code>search:progress</code>: Fired to indicate search progress.</p>
                            <p><code>search:cancelled</code>: Fired when the search is cancelled.</p>
                            <p><code>search:start</code>: Fired when the search is started.</p>
                                <p><code>search:done</code>: Fired when the search is completed and will return no more results. This event is never fired for real-time searches.</p>
                        </ul>

                        <div class="page-header"></div>
                        <h2>PostProcessManager</h2>
                        <p>
                            A PostProcessManager provides a post-processed transformation of a parent search job.  Bind views to a PostProcessManager the same way you'd bind to a SearchManager. This example shows how to use PostProcessManager with the SearchManager example to limit the view to only those events that originate from the splunk webserver:
                        </p>

                        <div class="tab-pane active" id="js5">
                            <pre class="prettyprint linenums lang-js">
var ChartView = require("splunkjs/mvc/chartview");
new ChartView({
    id: "example-chart",
    managerid: "post1",
    el: $("#divToHangOn")
}).render();

var SearchManager = require("splunkjs/mvc/searchmanager");
new SearchManager({
    id: "search2",
    latest_time: "now",
    search: "index=_internal | stats count by sourcetype" 
});    

var PostProcessManager = require("splunkjs/mvc/postprocessmanager");
new PostProcessManager({
    id: "post1",
    managerid: "search2",
    search: "search sourcetype=splunk_web_access" 
});
                            </pre>
                        </div>

                        <h3>Options</h3>
                        <p>A Post-Process Search is server-side transformation of the parent search, and has no options of its own.</p>

                        <h3>Events</h3>
                        <p>The following events are fired by this post-process manager:</p>
                        <ul>
                            <p><code>search:start</code>: Fired when the search is started.</p>
                            <p><code>search:progress</code>: Fired to indicate search progress.</p>
                            <p><code>search:error</code>: Fired when an error occurs.</p>
                            <p><code>search:fail</code>: Fired when the search job fails.</p>
                            <p><code>search:cancelled</code>: Fired when the search is cancelled.</p>
                            <p><code>search:done</code>: Fired when the search is completed and will return no more results. This event is never fired for real-time searches.</p>
                        </ul>
                     </div>
                </div>
            </div>
        </div>
    </div>
</div>
